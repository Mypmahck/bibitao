<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>goods</title>
      <!--移除按钮CS-->
<meta name="description" content="Some ideas for modern button styles and effects">
<meta name="keywords" content="button, effect, hover, style, inspiration, web design">
<meta name="author" content="Codrops">
<link rel="shortcut icon" href="img/icon.png">
<link rel="stylesheet" type="text/css" href="./css/normalize.css">
<link rel="stylesheet" type="text/css" href="./css/vicons-font.css">
<link rel="stylesheet" type="text/css" href="./css/buttons.css">
<script id="_carbonads_projs" type="text/javascript" src="./css/C6AILKT.json"></script>
      
       <link rel="stylesheet" href="css/denglu.css">
      <link rel="stylesheet" href="css/shangpin.css"/>  
     <link rel="stylesheet" href="css/zhuce.css"> 
  <!--    动图cs -->
	  <link rel="stylesheet" href="css/style_all.css">  
<!-- 搜索框cs -->
	 <link rel="stylesheet" href="css/autocomplete.css"> 
<!-- 其他cs -->
	  <link rel="stylesheet" href="css/collect.css">   
<!--    <script type="text/javascript" src="../css/shouye.js"></script>-->
    <script src="js/jquery-3.4.1.js" type="text/javascript"></script>
    <!--<script src="css/shouye.js" type="text/javascript"></script>-->
     <script src="js/bootstrap.js" type="text/javascript"></script> 
    <script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <!--导航js-->
	<!-- <script type="text/javascript" src="js/jquery.js"></script> -->
	 <script type="text/javascript" src="js/autocomplete.js"></script> 
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet"> 
    <script type="text/javascript">
		//var proposals = ['百度1', '百度2', '百度3', '百度4', '百度5', '百度6', '百度7','呵呵呵呵呵呵呵','百度','新浪','a1','a2','a3','a4','b1','b2','b3','b4'];
		$(document).ready(function(){
			$('#search-form').autocomplete({
				//hints: proposals,
				width: 180,
				height: 30,
				/* onSubmit: function(text){
					$('#message').html('Selected: <b>' + text + '</b>');
				} */
			});
		});
		window.onscroll=function(){
			if($(document).scrollTop()>2230){
				$("#fz").addClass('fy');
				$("#fz").removeClass('fa');
				$("#fz").removeClass('fx');
			}
			else if($(document).scrollTop()>80){
				$("#fz").addClass('fa');
				$("#fz").removeClass('fx');
				$("#fz").removeClass('fy');
			}	
			else{
				$("#fz").addClass('fx');
				$("#fz").removeClass('fy');
				$("#fz").removeClass('fa');
			}
		} 
	</script>
</head>
<body>
<div class="wrapper">
        <!--	导航-->
	<div id="header" class="navbar-fixed-top center-block">
		<nav class="navbar navbar-default navbar-inverse">
<!--		品牌名-->
			<a class="navbar-brand" href="index.html">bbt</a>
<!--			其他标签-->
			<div class="container-fluid">
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
<!--				主页-->
					<ul id="toIndex" class="nav navbar-nav">
						<li><a href="index.html"><span class="glyphicon glyphicon-home" aria-hidden="true"></span><span>主页</span> <span class="sr-only">(current)</span></a></li>
					</ul>
<!--				个人中心-->
					<ul id="toPersonal" class="nav navbar-nav person_all">
					<li>
						<a href="personal.html">
							<span class="glyphicon glyphicon-user" aria-hidden="true">
								</span>
								<span>个人中心</span>
								<span class="sr-only">(current)</span>
						</a>
					</li>
					</ul>
<!--			好物推荐-->
					<div class="navbar-header tuijian_all">
						<ul id="toTuijian" class="nav navbar-nav">
							<li><a class="navbar-brand" href="tuijian.html"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span><span>好物推荐</span></a></li>
						</ul>
					</div>
<!--				搜索-->
					<form id="transient" class="navbar-form navbar-left col-lg-2">
<!--					搜索框-->
						<div class="search_pos">
							<div class="form-group search_box"  id="search-form">
							</div>
						</div>
<!--					搜索框-->
					</form>
<!--				登录注册-->
<!-- 					<ul class="nav navbar-nav navbar-right wsh ">
						<li class="dropdown">
							<a href=" " class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
								<span class="glyphicon glyphicon-tag" aria-hidden="true"></span>
								登录/注册
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								<li>
									<a id="toLogin" href="#">登陆</a>
								</li>
								<li role="separator" class="divider">

								</li>
								<li>
									<a id="toRegist" href="#">注册</a>
								</li>
								<li>< a href="#">注销</ a></li>
							</ul>
						</li>
					</ul> -->
				</div>
			</div>
		</nav>
	</div>
	<div class="content center-block">
		<!--中间主题内容-->
		<div class="aa">
		<!--左侧商品部分-->
<!-- 				<div class="ba">
					第一个商品
					<div class="bb">
						商品文字部分
						<div class="bba">
							店铺名
							时尚荟化妆品店
							<img src="img/timg.jpg" alt="">
							京东图标
						</div>
						<div class="bbb">
							商品名称
							<a href="">香奈儿女王香水持久啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊</a>
							商品名称导入
						</div>
						<div class="bbc">
							评论及好评率
							5800+  条评论&好评率：98%
						</div>
						<div class="bbd">
							价格
							￥34.00
							<a href="price.html"><img src="img/t_7（1）.png" alt=""></a>
							<a href=""><img src="img/t_7（2）.png" alt=""></a>
						</div>
					</div>
					<div class="bc">
						商品图片外部div
						<div class="bca">
							商品图片内部div
							<img src="img/timg.jpg" alt="">
							商品图片导入
						</div>
					</div>
					<div class="ca">
						商品右侧添加至比较图片
						<a href="">
							<img src="img/tjzbj.png" alt="">
						</a>
						图片导入
					</div>
				</div>
				<div class="da">
					第二个商品
					<div class="db">
						文字部分
						<div class="dba">
							店铺名
							时尚荟化妆品店
							<img src="img/timg.jpg" alt="">
							京东图片
						</div>
						<div class="dbb">
							<a href="">香奈儿女王香水持久啊啊啊啊啊啊啊啊啊啊啊啊</a>
						</div>
						第二个商品名称
						<div class="dbc">
							评论及好评率外部div
							5800+  条评论&好评率：98%
							评论及好评率导入
						</div>
						<div class="dbd">
							价格
							￥34.00
							<a href="price.html"><img src="img/t_7（1）.png" alt=""></a>
							<a href=""><img src="img/t_7（2）.png" alt=""></a>
						</div>
					</div>
					<div class="dc">
						第二个商品图片外部div
						<div class="dca">
							商品图片内部div
							<img src="img/timg.jpg" alt="">
							第二个商品图片导入
						</div>
					</div>
					<div class="ea">
						第二个商品右侧添加至比较
						<a href=""><img src="img/tjzbj.png" alt=""></a>
						添加至比较图片导入
					</div>
				</div> -->

			<!--左侧商品部分-->

	</div>
		<!-- 页码原位置 -->
				<!-- 页码 -->
		 	<div class="goodsPage">
			 <nav aria-label="goodsPage navigation"> 
			   <ul class="pagination">  
				<!-- <li> -->
				  <!-- <a href="#" aria-label="Previous">
					<span aria-hidden="true">&laquo;</span>
				  </a>
				</li>
				<li><a href="#">1</a></li>
				<li><a href="#">2</a></li>
				<li><a href="#">3</a></li>
				<li><a href="#">4</a></li>
				<li><a href="#">5</a></li>
				<li>
				  <a href="#" aria-label="Next">
					<span aria-hidden="true">&raquo;</span>
				  </a>
				</li> -->
			  </ul>
			</nav>
		</div>
	
 		<div class="fx" id="fz">
			<!--页面右侧比较外部div  -->
			<div class="fb">
				
				<div class="fba">
					Compared
				</div>
				<div class="fbb">
					相比较
				</div>
				<div class="fbc">
					*最多添加5个
				</div>
			</div> 
<!-- 			<div class="ga">
					第一个比较外部div
					<div class="ha">
						第一个比较文字部分外部div
						<div class="ia">
							文字部分内部div
							<div class="iaa">完美日记官方旗舰店</div>
							<div class="iab">￥100.00</div>
						</div>
						<div class="iac">
								进入按钮位置样式控制
							<div class="box bg-1">
								<button id="deleteCompare" class="button button--winona button--border-thin button--round-s" data-text="remove"><span>移除</span></button>
							进入超链接
							</div>
						</div>
						<div class="hb">
						商品图片div
								<img src="img/timg.jpg" alt="">
								商品图片导入
						</div>
					</div>
				</div> -->
				

<!-- 			<div class="ga">
				第一个比较外部div
				<div class="ha">
					第一个比较文字部分外部div
					<div class="ia">
						文字部分内部div
						<div class="iaa">完美日记官方旗舰店</div>
						<div class="iab">￥100.00</div>
						<div class="iac">
							<a href="">移除</a>
							移除按钮
						</div>
					</div>
				</div>
				<div class="hb">
					商品图片div
					<a href="">
						<img src="img/timg.jpg" alt="">
						商品图片导入
					</a>
				</div>
			</div> -->
		<div id="toPareNew" class="iac compare">
        <!--进入按钮位置样式控制-->
    <div class="box bg-1">
        <button id="toCompare" class="button button--winona button--border-thin button--round-s" data-text="compare"><span>进入对比页面</span></button>
       <!--进入超链接-->
    </div>
            </div>
			
		</div>
		
	
	</div>
	<div class="footer">
		<div id="footer" class="row">
		<table>
			<tr>
				<th class="col-md-2">比价指南</th>
				<th class="col-md-2">合作伙伴</th>
				<th class="col-md-2">关于我们</th>
			</tr>
			<tr>
				<td><a href="">常见问题</a></td>
				<td><a href="">京东</a></td>
				<td><a href="">©2019比比淘版权所有</a></td>
			</tr>
			<tr>
				<td><a href="">联系客服</a></td>
				<td><a href="">天猫</a></td>
				<td><a href="">友情链接</a></td>
			</tr>
			<tr>
				<td><a href="">比价流程</a></td>
				<td><a href="">淘宝</a></td>
				<td><a href="">浙ICP备10201940号</a></td>
			</tr>
			<tr>
				<td></td>
				<td><a href=""></a>唯品会</td>
				<td><a href=""></a>浙公网安备33030802010083</td>
			</tr>
		</table>
		<!--		置顶-->
 		<div id="btn" class="zhiding alert alert-danger" role="alert">
			<a  href="#"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span></a>
		</div> 
		</div>
	</div>
</div>
<!--移除按钮js-->
<script>

			(function() {

				var isSafari = !!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);

				if(isSafari) {

					document.getElementById('support-note').style.display = 'block';

				}

			})();

</script>
</body>
</html>
<script type="text/javascript"> 

 function getUrl(){
	var deffered = new $.Deferred();
	$.getJSON("res/serverconfig.json",(responseText)=>{
		$url = responseText.protocol + responseText.domain+ ":" + responseText.port + responseText.context;
		//执行显示是否拿到数据
		//console.log($url);
		
		deffered.resolve($url);
	});
	var result = new $.Deferred();
 	deffered.then(function( serverconfig ) {
		$.getJSON("res/jumpconfig.json",(responseText)=>{
			$urls = responseText.protocol + responseText.domain;
			var getDict=[];
			getDict["serverconfig"]=serverconfig;
			getDict["jumpconfig"]=$urls;
			//执行显示是否拿到数据
			//console.log(getDict);
			result.resolve(getDict);
		});		
		
	}) 
	return result;
}
	 
	$(function(){
		
		var def = getUrl();
		def.then(function(getDict){
		//关于登录注册 直接加上 就可以  删掉一个js
		//刷新页面 判定用户是否登录
		//window.scrollTo(0,0);
		/* token无内容 说明还没有登录 判定用户是否登录 */
		//console.log($url);
			//获取url中的参数
	var url = location.search;
	var arr_content = url.split('&')[0];
	var content = decodeURI(arr_content.split('=')[1]);
	//console.log(content)
	var arr_page = url.split('&')[1];
	var pageCurrent = arr_page.split('=')[1]
	//console.log(content)
	//console.log(url)
	//console.log(pageCurrent)
		//console.log($url);
		if(localStorage.length == 0){
			$("#transient").after('<!--				登录注册--><ul class="nav navbar-nav navbar-right wsh "><li class="dropdown"><a href=" " class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span>登录/注册<span class="caret"></span></a><ul class="dropdown-menu"><li><a id="toLogin" href="#">登录</a></li><li role="separator" class="divider"></li><li><a id="toRegist" href="#">注册</a></li><!-- <li>< a href="#">注销</ a></li> --></ul></li></ul>')
		}else{
			var tokens=localStorage.getItem("token");
			let $data={token:tokens};
			let data = JSON.stringify($data)
			$.ajax({
				type:"post",
				data:data,
				url:getDict.serverconfig+"/judgeLoginStatus.action",
				headers:{"Content-Type":"application/json;charset=UTF-8"},
				dataType:"json",
				success:function(responseText){
					if(responseText.status === "200"){   //"<p>欢迎您,"+responseText.userName+"		<a id='out' href='#'>注销</a></p>"
						$("#transient").after('<!--				登录注册--><ul class="nav navbar-nav navbar-right wsh "><li class="dropdown"><a href=" " class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span>欢迎您:'+responseText.userName+'<span class="caret"></span></a><ul class="dropdown-menu"><li><a id="out" href="#">注销</a></li><!-- <li>< a href="#">注销</ a></li> --></ul></li></ul>')
					}else{
						//登录过期
						$("#transient").after('<!--				登录注册--><ul class="nav navbar-nav navbar-right wsh "><li class="dropdown"><a href=" " class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span>登录过期啦!请重新登录<span class="caret"></span></a><ul class="dropdown-menu"><li><a id="toLogin" href="#">登录</a></li><li role="separator" class="divider"></li><li><a id="toRegist" href="#">注册</a></li><!-- <li>< a href="#">注销</ a></li> --></ul></li></ul>')
					}	
				},
				error:function(){
					location.href=getDict.jumpconfig+"/404.html"
				}	
			});
		}
		
		//注销
			$("body").on("click","#out",function(){
				localStorage.removeItem("token");
				location.reload();
			});
		
		
	
		//弹出登录
		$("body").on("click","#toLogin,#create-btn2",function(){
			
			$("body").append('<div class="sign-in" id="js1"><div id="main-content" class="card"> <header><span class="close" id="close1"></span><span id="bbt-signin-header">账户</span></header> <section><div class="condition2">*为必填项目</div><form action=""><div class="input-row"><h1 class="accounttext">账号*</h1><input id="account" class="account" type="text" placeholder=""/></div><div class="password-row"><div class="display"><a href="javascript:void(0)">显示</a></div><h1 class="passwordtext">密码*</h1><input id="password" class="password" type="password" placeholder=""/><div class="forgetnumber"><a href="javascript:void(0)">忘记密码？</a></div></div><div class="button-row"><button id="submit-btn" type="button">登录</button> </div><div class="tos-pp">继续操作则表示您同意我们的<a id="bbt-tos" href="javascript:void(0)">服务条款</a>和<a id="bbt-pp" href="javascript:void(0)">隐私声明</a></div></form><hr/><div class="button-row"><button id="create-btn" type="submit">创建账户</button></div></section><div class="prompt"><p>通过您的账户，将可以：</p><p>● 查看预期价格</p><p>● 查看您的所有收藏记录和浏览记录</p><p>● 管理您的地址簿，以方便日后订购</p><p>● 更新您的个人资料</p></div></div></div>')
		
		
/* 		let $url = "";
		//获取url的路径
		//获取json文件中的数据				回调函数 当执行完后获取数据后
		$.getJSON("res/serverconfig.json",(responseText)=>{
			$url = responseText.protocol + responseText.domain+ ":" + responseText.port + responseText.context;
			//执行显示是否拿到数据
			window.console.log($url);
		}); */
		
		//显示密码
		$(".display").click(function(){
			let pass_type = $('.password').attr('type');
			if (pass_type === 'password' ){
		          $('.password').attr('type','text');
		          $('.display').html('<a href="javascript:void(0)">隐藏</a>')
		       } else {
		           $('.password').attr('type', 'password');
		           $('.display').html('<a href="javascript:void(0)">显示</a>')
		       }
		})
		//判定账号密码是否为空
		//if($("#account").val() !="" && $("#password").val() != ""){
			
			$("#submit-btn").click(()=>{
				//先令判定框为空
				$("#judge_loginbtn").html("");
				$("#judge_loginbtn").remove();
				let $data = {
						account: $.trim($("#account").val()),  //trim 去除两端空白符号
						password: $.trim($("#password").val())
						};
				//window.console.log($data);
				//把对象变成字符串 以对应ContentType的json字符串传过去
				let person = JSON.stringify($data);
				$.ajax({
					type:"post",
					url:getDict.serverconfig+"/login.action",
					data:person,
					headers:{"Content-Type":"application/json;charset=UTF-8"},
					dataType:"json",
					async:false,
					//contentType:  这里显示的是表单type传值  一般用json 字符串传值 这样就需要修改contentType
					success: function(responseText){
						//window.console.log(responseText)
						//当账号和密码一致时
						if(responseText.status ==="200"){
							if(!window.localStorage){
								alert("浏览器不支持localStorage");
							}else{
								//var storage=window.localStorage; 
								//console.log(responseText.token);
								//localStorage.clear();
								/* 存入token  */
								localStorage.setItem("token", responseText.token);
								/* storage["token"]=responseText.token; */
								//$(".forgetnumber").prepend("<span id='judge_loginbtn' style='color:green'>恭喜，登陆成功</span>")
								//console.log(localStorage);
								var returnUrl = localStorage.returnUrl;
								//console.log(returnUrl)
								localStorage.removeItem("returnUrl");
								//if(returnUrl === undefined){
								//返回当前页面
								//alert(getDict.jumpconfig+"/goods.html"+url)
								location.href=getDict.jumpconfig+"/goods.html"+url;
								//}else{
								//	location.href='http://bbt.com/goodsDetail.html'+returnUrl;  
								//}
								
								//location.href='http://bbt.com/goodsDetail.html'+returnUrl;  
							
		/* 			            storage.clear();
					            console.log(storage); */
							}
						}else{
							$(".forgetnumber").prepend('<span id="judge_loginbtn" style="margin-right:160px;color:red;" >账号或密码错误</span>')
						}	
					},
					error:function(){
						location.href=getDict.jumpconfig+"/404.html"
					}
				});
				
			});
	})
		// 关闭登录页面
		$("body").on("click","#close1",function(){
				$(this).parents("#js1").remove();
		})
		//关闭注册页面
		$("body").on("click","#close2",function(){
				$(this).parents("#js2").remove();
		})
		
		
		//弹出注册
		$("body").on("click","#toRegist,#create-btn",function(){
			$("#js1").remove()
			$("body").append('<div class="sign-in" id="js2"><div id="main-content2" class="card"><header><span class="close" id="close2"></span><span id="bbt-signin-header2">账户</span></header><section><div class="condition">*必填项目</div><div class="build">创建账户</div><form action=""><div class="name-row"><h1  class="nametext">用户名* </h1><input id="name" class="name" type="text" placeholder=""/></div><div class="input-row"><h1 class="accounttext">账号* </h1><input id="account" class="account" type="text" placeholder=""/></div><div class="password-row"><div class="display"><a href="javascript:void(0)">显示</a></div><h1 id="judgePassword1" class="passwordtext">密码* </h1><input id="password1" class="password" type="password" placeholder=""/></div><div class="password-row"><h1 id="judgePassword2" class="passwordtext">确定密码* </h1><input id="password2" class="password" type="password" placeholder=""/></div><div class="mail-row"><h1 class="mailtext">E-mail* </h1><input id="Email" class="mail" type="text" placeholder=""></div><div class="phone-row"><h1 class="phonetext">手机号码* </h1><input id="tel" class="phone" type="text" placeholder=""></div><div class="ag-po">创建账户，您即同意接受我们的条款《<a id="bbt-ag" href="">比比淘用户注册协议</a>》，并同意您的个人信息遵照《<a id="bbt-po" href="">比比淘隐私政策</a>》</div></form><div class="button-row"><button id="create-btn2" type="submit">创建账户</button></div><hr/></section></div></div>')
			
			//正式注册样式
			var $name = false;
			var $account = false;
			var $passowrd1 = false;
			var $password2 = false;
			var $Email = false;
			var $tel = false;
			
/* 			let $url = "";
			//获取url的路径
			//获取json文件中的数据				回调函数 当执行完后获取数据后
			$.getJSON("res/serverconfig.json",(responseText)=>{
				$url = responseText.protocol + responseText.domain+ ":" + responseText.port + responseText.context;
				//执行显示是否拿到数据
				window.console.log($url);
			}); */
			//function $judge(){
			//	console.log(123)
			//}
			
			// 判定用户账号是否存在
			$("#account").blur(function(){
				//当用户失去焦点时，先去除之前的内容
				$(".tishi2").remove();
				/* $() */
				 let $datas={
						 account :$.trim($("#account").val())
				 }
				 let data = JSON.stringify($datas);
				 if($.trim($("#account").val()).length >=6 && $.trim($("#account").val()).length<=20 ){
					 $.ajax({
							type:"post",
							data:data,
							url: getDict.serverconfig+"/judgeAccount.action",
							dataType:"json",
						 	headers:{"Content-Type":"application/json;charset=UTF-8"},
							success:function(responseText){
								if(responseText.status === 200){
									/* console.log("此用户名可用"); */
									$account = true;
								}else{
									$(".accounttext").append('<span style="color:red" class="tishi2">（此账号已被注册）</span>');
								}
							},
							error:function(){
								location.href=getDict.jumpconfig+"/404.html"
							}
						 });
				 }else{
					 $(".accounttext").append('<span style="color:red" class="tishi2">（输入的长度要在6-20之间）</span>');
				 }
				});
			
			//判定密码长度
			$("#password1").blur(function(){
				$(".tishi3").remove();
				if($.trim($("#password1").val()).length <6 || $.trim($("#password1").val()).length >20){
					$("#judgePassword1").append('<span style="color:red" class="tishi3">（密码长度需在6-20之间）</span>');
				}else{
					$password1 = true;
				}
			})
			
			// 判定确认密码是否与密码相同
			$("#password2").blur(function(){
				$(".tishi4").remove()
				if($("#password1").val() ==""){
					$("#judgePassword2").append('<span style="color:red" class="tishi4">（密码不能为空）</span>');
				}
				else if($("#password1").val() === $("#password2").val()){
					$password2 = true;
				}else{
					$("#judgePassword2").append('<span style="color:red" class="tishi4">（两次密码输入不一致）</span>');
				}
			})
			
			//判定邮箱格式
			$("#Email").blur(function(){
				$(".tishi5").remove()
				   var reg = new RegExp("^[a-z0-9A-Z]+[- | a-z0-9A-Z . _]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\\.)+[a-z]{2,}$"); 
				   var email = $('#Email').val();
				   if(email == ''){
					  $(".mailtext").append('<span style="color:red" class="tishi5">（邮箱不能为空）</span>');
				}else if(!reg.test(email)){
					$(".mailtext").append('<span style="color:red"  class="tishi5">（邮箱的格式不正确）</span>');
				}else{
					$Email = true;
				}
				
			})
			//判断手机号码的格式
				$("#tel").blur(function(){
					$(".tishi6").remove();
					var reg = /(1[3-9]\d{9}$)/; 
					var tel = $.trim($("#tel").val());
					if(!reg.test(tel)){
						$(".phonetext").append('<span style="color:red" class="tishi6">（手机的格式不正确）</span>');
					}else{
						$tel = true;
					}
				})
			
		//显示密码
		$(".display").click(function(){
			let pass_type = $('.password').attr('type');
			if (pass_type === 'password' ){
		          $('.password').attr('type', 'text');
		          $('.display').html('<a href="javascript:void(0)">隐藏</a>')
		       } else {
		           $('.password').attr('type', 'password');
		           $('.display').html('<a href="javascript:void(0)">显示</a>')
		       }
		})
			
			//判断名字的长度
			$("#name").blur(function(){
				$(".tishi1").remove();
				if($.trim($("#name").val()).length >1 && $.trim($("#name").val()).length <7){
					$name = true;
				}else{
					$(".nametext").append('<span style="color:red" class="tishi1">（用户名长度需在1-7之间）</span>');
				}
			})
			
			//注册按钮判定
			$("#create-btn2").click(function(){
				$(".tishi8").remove();
				if($name == true && $account == true && $password1 == true && $password2 == true && $Email == true && $tel == true){
					let $datas={
							name: $.trim($("#name").val()),
							account: $.trim($("#account").val()),
							password: $.trim($("#password1").val()),
							Email: $('#Email').val(),
							tel: $.trim($("#tel").val())
						}
					//console.log($datas)
					let data = JSON.stringify($datas);
					$.ajax({
						type:"post",
						data:data,
						url:getDict.serverconfig+"/regist.action",
						headers:{"Content-Type":"application/json;charset=UTF-8"},
						dataType: "json",
						success:function(responseText){
							if(responseText.rows ===1){
								$("#js2").remove();
								//$(".button-row").after("<span id='judge_registBtn' style='color: green'>注册成功</span>");
								//location.href='http://bbt.com/Login.html';
							}else{
								
								$(".button-row").after('<span style="color:red" class="tishi8">（注册失败啦 请重新注册）</span>');
							}
							
						},
						error:function(){
							location.href=getDict.jumpconfig+"/404.html"
						}
						
					})
				}else{
					$(".button-row").after('<span style="color:red" class="tishi8">（请先将信息填写完整）</span>');
				}
			})
		})
		
		//搜索框
		//字段近似值阶段
		//let $url=""
/* 		$.getJSON("res/serverconfig.json",(responseText)=>{
		$url = responseText.protocol + responseText.domain+":"+responseText.port+responseText.context;
			window.console.log($url);
		}); */
		
		$(".autocomplete-input").keyup(function(){
			$(".proposal-list").show();
			if($.trim($(".autocomplete-input").val()) != ""){
				let $data = {
						keyword: $.trim($(".autocomplete-input").val())
					};
					//window.console.log($data)
					let digit = JSON.stringify($data)
					$.ajax({
						type:"post",
						url:getDict.serverconfig+"/searchSimilar.action",
						data:digit,
						headers:{"Content-Type":"application/json;charset=UTF-8"},
						dataType:"json",
						success:function(responseText){
							/* 列表属性 */
							
							$(".proposal-list").text("")
			 				for(var one in responseText){ //<li class="proposal">a1</li>  <tr><td class= 'content'>"+responseText[one]+"</td></tr>
								$(".proposal-list").append('<li class="proposal">'+responseText[one]+'</li>')
							} 
							
						},
						error:function(){
							location.href=getDict.jumpconfig+"/404.html"
						}
					})
			}else{
				$(".proposal-list").text("");
			}
		});
		
		// 近似值优化
		$(".autocomplete-input").click(function(){
			$(".proposal-list").show();
		});
		$(document).click(function(e){
			var target = $(e.target);
			if(target.attr("class")==="autocomplete-input") {return;}
			else if(target.attr("class")==="proposal"){
				$(".autocomplete-input").val(target.text());
				$(".proposal-list").text("");
				$(".proposal-list").hide();
				}
			else{
				$(".proposal-list").hide();
			}
		});
		//鼠标移入后变色
/* 		$(".proposal").mouseover(function(){
			$(this).css("background-color","red")
		}) */
		
		
			//点击搜索触发事物 将关键词存入词库
	$(".autocomplete-button").click(function(){
		if($.trim($(".autocomplete-input").val()) !== ""){
			let $datas={
					content: $.trim($(".autocomplete-input").val())	
				}
				//window.console.log($datas)
				data = JSON.stringify($datas);
				$.ajax({
					type:"post",
					url:getDict.serverconfig+"/search.action",
					data:data,
					headers:{"Content-Type":"application/json;charset=UTF-8"},
					dataType:"json",
					success:function(){
						//console.log("成功插入，即将跳转");
						location.href=getDict.jumpconfig+"/goods.html?content="+$.trim($(".autocomplete-input").val())+"&pageCurrent=1";
					},
					error:function(){
						location.href=getDict.jumpconfig+"/404.html"
					}
				})
		}else{
			location.href=getDict.jumpconfig+'/index.html'; 
		}
	})
	
	//商品列表功能正式
	
	//回车键触发点击事件
		$("input[name='query']").keydown(function(event){
			if(event.keyCode==13){
			$(".autocomplete-button").click();
			}
			})
		//取消原form表单的submit功能
		$("#transient").submit( function () {
  			return false;
		} );
	//给搜索框赋默认值
	$("input[name=query]").val([content]);
	
	//向后台传输关键词并返回数据
	$.ajax({
	type:"get",
	//data:data,
	url:getDict.serverconfig+"/goodsList.action?content="+content+"&pageCurrent="+pageCurrent,
	dataType:"json",
	headers:{"Content-Type":"application/json;charset=UTF-8"},
	success:function(responseText){
		if(responseText.length != 0){
			//console.log(responseText);
			$("#fz").show();
			for(var i=0;i<responseText.length;i=i+2){
				if(responseText[i].source == "京东"){
					var source1 = "img/timg.jpg";
				}else{
					var source1 = "img/tianmao.png";
				}
				if(responseText[parseInt(i)+1].source == "京东"){
					var source2 = "img/timg.jpg";
				}else{
					var source2 = "img/tianmao.png";
				}
				var goodsImg1 = responseText[i].goodsImg+""
				var goodsImg2 = responseText[parseInt(i)+1].goodsImg+""
				var goodsImg = goodsImg1.replace("E:\\","")
				var goodsImg2 = goodsImg2.replace("E:\\","")																																				/*img/timg.jpg  */																											
				$(".aa").append('			<div name="'+responseText[i].goodsId+'" class="ba"><!--第一个商品--><div class="bb"><!--商品文字部分--><div class="bba"><!--店铺名-->'+responseText[i].shop+'<img src="'+source1+'" alt=""><!--京东图标--></div><div class="bbb"><!--商品名称--><a class="theAll" href="javascript:void(0);">'+responseText[i].goodsTitle+'</a><!--商品名称导入--></div><div class="bbc"><!--评论及好评率--><span style="color:#337ab7;">'+responseText[i].goodsEva+'</span>  条评论&好评率：<span style="color:#337ab7;">'+responseText[i].goodsDegree+'</span></div><div class="bbd"><!--价格-->￥'+responseText[i].goodsPrice+'</div></div><div class="bc"><!--商品图片外部div--><div class="bca"><!--商品图片内部div--><a class="theAll" href="javascript:void(0);"><img src="'+goodsImg+'" alt=""></a><!--商品图片导入--></div></div><div class="ca"><!--商品右侧添加至比较图片--><a id="toPar" href="javascript:void(0);"><img src="img/tjzbj.png" alt=""></a><!--图片导入--></div></div>')
				$(".aa").append('			<div name="'+responseText[parseInt(i)+1].goodsId+'" class="da"><!--第二个商品--><div class="db"><!--文字部分--><div class="dba"><!--店铺名-->'+responseText[parseInt(i)+1].shop+'<img src="'+source2+'" alt=""><!--京东图片--></div><div class="dbb"><a class="theAll" href="javascript:void(0);">'+responseText[parseInt(i)+1].goodsTitle+'</a></div><!--第二个商品名称--><div class="dbc"><!--评论及好评率外部div--><span style="color:#337ab7;">'+responseText[parseInt(i)+1].goodsEva+'</span>  条评论&好评率：<span style="color:#337ab7;">'+responseText[parseInt(i)+1].goodsDegree+'</span><!--评论及好评率导入--></div><div class="dbd"><!--价格-->￥'+responseText[parseInt(i)+1].goodsPrice+'</div></div><div class="dc"><!--第二个商品图片外部div--><div class="dca"><!--商品图片内部div--><a class="theAll" href="javascript:void(0);"><img src="'+goodsImg2+'" alt=""></a><!--第二个商品图片导入--></div></div><div class="ea"><!--第二个商品右侧添加至比较--><a id="toPar" href="javascript:void(0);"><img src="img/tjzbj.png" alt=""></a><!--添加至比较图片导入--></div></div>')																																																																	
			}
		}else{
			$(".aa").append('<img style="margin-top:100px;margin-left:400px;" src="img/notFound.png" alt="">')
		}
	},
	error:function(){
		//location.href=getDict.jumpconfig+"/404.html"
	}
	});
	
	
    //页面刷新时显示比较框的商品  显示一共有多少个商品
    //console.log((JSON.stringify($.cookie())).split('","'))
    var arrContent = (JSON.stringify($.cookie())).split('","')
    var length = arrContent.length
    if(arrContent[0] =="{}"){
  	  length =0;
    }
    //console.log(length)
    //console.log(length)
    //console.log($.cookie())
    if(length !==0){
	      for(var i=1;i<=length;i++){
	    	  var temp = JSON.parse($.cookie(i+""))
	    	  //console.log(temp)
	    	  $("#toPareNew").before('			<div name="'+temp.goodsId+'" value="'+i+'" class="ga"><!--第一个比较外部div--><div class="ha"><!--第一个比较文字部分外部div--><div class="ia"><!--文字部分内部div--><div class="iaa">'+temp.Shop+'</div><div class="iab">'+temp.goodsPrice+'</div><div class="iac"><div class="box bg-1"><button id="deleteCompare" class="button button--winona button--border-thin button--round-s" data-text="remove"><span>移除</span></button><!--进入超链接--></div><!--移除按钮--></div></div></div><div class="hb"><!--商品图片div--><a href="#"><img id="jumpPrice" src="'+temp.goodsImg+'" alt=""><!--商品图片导入--></a></div></div>')
	      }
    }
	
	
	      //点击添加比较添加到框框并保存到cookie中
       $("body").on("click","#toPar",function(){
    	  //var goodsId=$(this).next().find('a').attr("name")
    	  var Shop = $(this).parents(".ba").find($(".bba")).text();
    	  //console.log("第一次")
    	  //console.log(Shop)
		  if(Shop !== ""){
	    	  var goodsId=$(this).parents(".ba").attr("name");
			  var goodsPrice=$(this).parents(".ba").find($(".bbd")).text();
	    	  var goodsImg = $(this).parents(".ba").find($(".bca")).find('img').attr('src')
		  }else{
			  var Shop = $(this).parents(".da").find($(".dba")).text();
			  //console.log("第二次")
			  var goodsId=$(this).parents(".da").attr("name");
			  //console.log(Shop)
	    	  var goodsPrice=$(this).parents(".da").find($(".dbd")).text();
	    	  var goodsImg = $(this).parents(".da").find($(".dca")).find('img').attr('src')
		  }
     	  //var goodsTitle=$(this).next().find($(".title")).html()
    	 // var goodsPrice = $(this).next().find($(".price")).html()
    	  $data={
    		  Shop:Shop,
    		  goodsId: goodsId,
    		  goodsPrice:goodsPrice,
    		  goodsImg: goodsImg
    	  }
    	  var data = JSON.stringify($data)
    	  //console.log(data)
    	  //$.cookie(goodsId,data)
    	  //var arrcookies = cookies.split(";")
    	  //var i;
    	  var judge = false  //判断库存
    	  for(var i=1;i<=5;i++){
    		  if($.cookie(i+"")===undefined){
        		  for(var j=1;j<i;j++){
        			  //console.log($.cookie(j+""))
        			  //console.log($.cookie(i+""))
        			  if($.cookie(j+"")===data){
        				  alert("这个商品比较库里已经有啦！")
        				  judge = true
        				  break;
        			  }
        		  }
        		  if(judge ==true){
        			  break;
        		  }
        		  if(j==i){
        			  $.cookie(i+"",data)
            		  $("#toPareNew").before('			<div name="'+goodsId+'" value="'+i+'" class="ga"><!--第一个比较外部div--><div class="ha"><!--第一个比较文字部分外部div--><div class="ia"><!--文字部分内部div--><div class="iaa">'+Shop+'</div><div class="iab">'+goodsPrice+'</div><div class="iac"><div class="box bg-1"><button id="deleteCompare" class="button button--winona button--border-thin button--round-s" data-text="remove"><span>移除</span></button><!--进入超链接--></div><!--移除按钮--></div></div></div><div class="hb"><!--商品图片div--><a href="#"><img id="jumpPrice" src="'+goodsImg+'" alt=""><!--商品图片导入--></a></div></div>')
            		  break;
        		  }
        		}
			}
    	  if(i==6){
    		  alert("比较库已经满啦！")
    	  }  
       })
       
             //点击商品比较的删除后取消
      $("body").on("click","#deleteCompare",function(){
    	  var compareId = $(this).parents(".ga").attr("value")		/* .attr("value"); */
    	  //cookie中一共多少个商品   通过","分割有一定风险
    	  var length = (JSON.stringify($.cookie())).split('","').length
    	  //先进行判定 如果删除的id和总长度一样 则直接删除 如果不一样则进行循环
    	  //console.log(compareId);
    	  //console.log(length)
    	  if(compareId === length){
    		  $.removeCookie(compareId+"")
    		  $(this).parents(".ga").remove();
    	  }else{
    		  for(var i=compareId;i<length;i++){
    			  //console.log(i)
    			  //console.log($.cookie(i+""));
    			  var next = $.cookie((parseInt(i)+1)+"")
    			  //console.log(next)
    			  //$.removeCookie(i+"")
    			  $.cookie(i+"",next);
    			  //console.log($.cookie(i+""));
    		  }
    		  
    		  $.removeCookie(length+"")
    		  $(this).parents(".ga").remove();
    	  }
      })
      
  	//获取该商品总页数
 		let $data={content: content};
		let data = JSON.stringify($data)
		$.ajax({
			type:"post",
			data:data,
			url:getDict.serverconfig+"/getTotalPage.action",
			headers:{"Content-Type":"application/json;charset=UTF-8"},
			dataType:"json",
			success:function(responseText){
				if(responseText.totalPage >parseInt(pageCurrent) + parseInt("5")){
					//console.log(responseText)
					if(pageCurrent ==1){
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">上一页</a></li>')
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">1</a></li>')
						for(var i =2;i<6;i++){    //<a href="#" class="1do" >'+i+'</a>
							$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+i+'</a></li>')
						}
						$(".pagination").append('<li><a href="javascript:void(0);">...</a></li>')
						$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+responseText.totalPage+'</a></li>')
						$(".pagination").append('<li id="nextPage"><a href="javascript:void(0);">下一页</a></li>')  //<a href="#" id="nextPage" >下一页</a>
					}else{
						$(".pagination").append('<li id="toPage"><a href="javascript:void(0);">回到首页</a></li>') //<a href="#" id="toPage" >回到首页</a>
						$(".pagination").append('<li id="lastPage"><a href="javascript:void(0);">上一页</a></li>')		//<a href="#" id="lastPage" >上一页</a>
						$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+(parseInt(pageCurrent)-parseInt("1"))+'</a></li>')
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">'+pageCurrent+'</a></li>')
						for(var i=(parseInt(pageCurrent)+parseInt("1"));i<(parseInt(pageCurrent)+parseInt("4"));i++){
							$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+i+'</a></li>')
						}
						$(".pagination").append('<li><a href="javascript:void(0);">...</a></li>')
						$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+responseText.totalPage+'</a></li>') 
						$(".pagination").append('<li id="nextPage"><a href="javascript:void(0);">下一页</a></li>')
					}
				}else if(responseText.totalPage ==pageCurrent ){
					if(pageCurrent ===1){
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">1</a></li>')
					}else if((parseInt(pageCurrent)-parseInt("7"))>1){
						$(".pagination").append('<li id="lastPage"><a href="javascript:void(0);">上一页</a></li>')
						$(".pagination").append('<li class="1do"><a href="javascript:void(0);">1</a></li>')
						$(".pagination").append('<li><a href="javascript:void(0);">...</a></li>')
						$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+(parseInt(pageCurrent)-parseInt("1"))+'</a></li>')
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">'+pageCurrent+'</a></li>')
						for(var i=(parseInt(pageCurrent)+parseInt("1"));i<=responseText.totalPage;i++){
							$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+i+'</a></li>')
						}
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">下一页</a></li>')
					}else{
						$(".pagination").append('<li id="lastPage"><a href="javascript:void(0);">上一页</a></li>')
						for(var i=1;i<pageCurrent;i++){
							$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+i+'</a></li>')
						}
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">'+pageCurrent+'</a></li>')
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">下一页</a></li>')
					}
				}else if(responseText.totalPage ==0){
					$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">'+pageCurrent+'</a></li>')
				}
				else{
					if((parseInt(pageCurrent)-parseInt("7"))>1){
						$(".pagination").append('<li id="lastPage"><a href="javascript:void(0);">上一页</a></li>')
						$(".pagination").append('<li class="1do"><a href="javascript:void(0);">1</a></li>')
						$(".pagination").append('<li><a href="javascript:void(0);">...</a></li>')
						$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+(parseInt(pageCurrent)-parseInt("1"))+'</a></li>')
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">'+pageCurrent+'</a></li>')
						for(var i=(parseInt(pageCurrent)+parseInt("1"));i<=responseText.totalPage;i++){
							$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+i+'</a></li>')
						}
						$(".pagination").append('<li id="nextPage"><a href="javascript:void(0);">下一页</a></li>')
					}
					else if(pageCurrent ==1){
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">上一页</a></li>')
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">1</a></li>')
						for(var i=2;i<=responseText.totalPage;i++){
							$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+i+'</a></li>')
						}
						$(".pagination").append('<li id="nextPage"><a href="javascript:void(0);">下一页</a></li>')
					}
					else{
						$(".pagination").append('<li id="lastPage"><a href="javascript:void(0);">上一页</a></li>')
						for(var i=1;i<pageCurrent;i++){
							$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+i+'</a></li>')
						}
						$(".pagination").append('<li><a style="color:black;" href="javascript:void(0);">'+pageCurrent+'</a></li>')
						for(var i=(parseInt(pageCurrent)+parseInt("1"));i<=responseText.totalPage;i++){
							$(".pagination").append('<li class="1do"><a href="javascript:void(0);">'+i+'</a></li>')
						}
						$(".pagination").append('<li id="nextPage"><a href="javascript:void(0);">下一页</a></li>')
					}
				}
				
				
			},
			error:function(){
				//location.href=getDict.jumpconfig+"/404.html"
			}	
		}); 
		
		//上一页 下一页 回到首页 判定
 		$("body").on("click","#lastPage",function(){
			var page = parseInt(pageCurrent)-parseInt("1")
			location.href=getDict.jumpconfig+"/goods.html?content="+content+"&pageCurrnet="+page;
		}); 
		
 		$("body").on("click","#nextPage",function(){
			var page = parseInt(pageCurrent)+parseInt("1")
			location.href=getDict.jumpconfig+"/goods.html?content="+content+"&pageCurrnet="+page;
		}); 
 		$("body").on("click","#toPage",function(){
			var page = parseInt("1")
			location.href=getDict.jumpconfig+"/goods.html?content="+content+"&pageCurrnet="+page;
		}); 
 		
	
	//页码判定跳转
 		$("body").on("click",".1do",function(){
				var page = $(this).find('a').html()
				location.href=getDict.jumpconfig+"/goods.html?content="+content+"&pageCurrnet="+page;
			}); 

 		// 大显示跳转到详情页
 		$("body").on("click",".theAll",function(){
 			var goodsId=$(this).parents(".ba").attr("name")          //$()attr("name");
 			if(goodsId !== undefined){
 				var Shop=$(this).parents(".ba").find($(".bba")).text()
 				var goodsPrice=$(this).parents(".ba").find($(".bbd")).text()
 				//console.log(goodsPrice)
 				
 			}else{
 				var goodsId=$(this).parents(".da").attr("name") 
 				var Shop=$(this).parents(".da").find($(".dba")).text()
 				var goodsPrice=$(this).parents(".da").find($(".dbd")).text()
 			}
 			window.open(getDict.jumpconfig+'/price.html?goodsId='+goodsId+'&shop='+Shop+'&goodsPrice='+goodsPrice); 
 			
 			/* location.href=getDict.jumpconfig+'/price.html?goodsId='+goodsId+'&shop='+Shop+'&goodsPrice='+goodsPrice;  */
 		})
 		
 		/* 	去比较页面 */
 		$("#toCompare").click(function(){
 		    var arrContent = (JSON.stringify($.cookie())).split('","')
 		    var length = arrContent.length
 		    if(arrContent[0] =="{}"){
 		  	  length =0;
 		    }
 		    
 			if(length != 0){
 				/* location.href=getDict.jumpconfig+'/compare.html' */
 				window.open(getDict.jumpconfig+'/compare.html'); 
 			}else{	
 			}
 			
 			
 		})
 		
 		
 		// 比较框跳转详情页
 				$("body").on("click","#jumpPrice",function(){
 					var goodsId=$(this).parents(".ga").attr("name");
 					var Shop=$(this).parents(".ga").find($(".iaa")).text();
 					var goodsPrice=$(this).parents(".ga").find($(".iab")).text();
 					/* location.href=getDict.jumpconfig+'/price.html?goodsId='+goodsId+'&shop='+Shop+'&goodsPrice='+goodsPrice;  */
 					window.open(getDict.jumpconfig+'/price.html?goodsId='+goodsId+'&shop='+Shop+'&goodsPrice='+goodsPrice); 
 				})
 						//标题栏跳往主页
		$("#toIndex").click(function(){
			
			location.href=getDict.jumpconfig+"/index.html";
		})
		//标题栏跳往个人中心
		$("#toPersonal").click(function(){
			location.href=getDict.jumpconfig+"/personal.html";
		})
		//标题栏跳往商品推荐
		$("#toTuijian").click(function(){
			location.href=getDict.jumpconfig+"/tuijian.html";
		})
		//点击回到顶部
		 $("#btn").hide();
	    //当滚动条的位置处于距顶部50像素以下时，跳转链接出现，否则消失
	      $(window).scroll(function() {
	        if ($(window).scrollTop() > 50) {
	          $("#btn").fadeIn(200);
	        } else {
	          $("#btn").fadeOut(200);
	        }
	      });
	      //当点击跳转链接后，回到页面顶部位置
	      $("#btn").click(function() {
	        $('body,html').animate({
	          scrollTop: 0
	        },
	        500);
	        return false;
	      });
		
	
		})
	}) 
</script>

