<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>compare</title>
<!--导出excel按钮CS-->
<meta name="description" content="Some ideas for modern button styles and effects">
<meta name="keywords" content="button, effect, hover, style, inspiration, web design">
<meta name="author" content="Codrops">
<link rel="shortcut icon" href="img/icon.png">
<link rel="stylesheet" type="text/css" href="./css/normalize.css">
<link rel="stylesheet" type="text/css" href="./css/vicons-font.css">
<link rel="stylesheet" type="text/css" href="./css/buttons2.css">
<!-- <script id="_carbonads_projs" type="text/javascript" src="./css/C6AILKT.json"></script> -->
<link rel="stylesheet" href="css/compare1.css">
<link rel="stylesheet" href="css/dengluCompar.css">
<link rel="stylesheet" href="css/zhuceCompar.css">
<!-- 搜索框cs -->
<link rel="stylesheet" href="css/autocomplete.css">   
<!-- 其他cs -->  
<!--    <script type="text/javascript" src="../css/shouye.js"></script>-->
<script src="js/jquery-3.4.1.js" type="text/javascript"></script>
    <!--<script src="css/shouye.js" type="text/javascript"></script>-->
<script src="js/bootstrap.js" type="text/javascript"></script> 
<script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <!--导航js-->
	<!-- <script type="text/javascript" src="js/jquery.js"></script> -->
<script type="text/javascript" src="js/autocomplete.js"></script> 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet"> 
 <script type="text/javascript">
		//var proposals = ['百度1', '百度2', '百度3', '百度4', '百度5', '百度6', '百度7','呵呵呵呵呵呵呵','百度','新浪','a1','a2','a3','a4','b1','b2','b3','b4'];
		$(document).ready(function(){
			$('#search-form').autocomplete({
				//hints: proposals,
				width: 180,
				height: 30,
				/* onSubmit: function(text){
					$('#message').html('Selected: <b>' + text + '</b>');
				} */
			});
		});
		window.onscroll=function(){
			if($(document).scrollTop()>2230){
				$("#fz").addClass('fy');
				$("#fz").removeClass('fa');
				$("#fz").removeClass('fx');
			}
			else if($(document).scrollTop()>80){
				$("#fz").addClass('fa');
				$("#fz").removeClass('fx');
				$("#fz").removeClass('fy');
			}	
			else{
				$("#fz").addClass('fx');
				$("#fz").removeClass('fy');
				$("#fz").removeClass('fa');
			}
		} 
	</script>
<!--表格-->
<!--<link rel="stylesheet" href="https://www.jq22.com/jquery/bootstrap-3.3.4.css">-->
<link rel="stylesheet" href="https://www.jq22.com/jquery/font-awesome.4.6.0.css">
</head>

<body>
<div id="wrapper">
<!--	导航-->
	<div id="header" class="navbar-fixed-top center-block">
		<nav class="navbar navbar-default navbar-inverse">
	<!--		品牌名-->
			<a class="navbar-brand" href="index.html">bbt</a>
	<!--			其他标签-->
			<div class="container-fluid">
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	<!--				主页-->
					<ul id="toIndex" class="nav navbar-nav">
						<li><a href="javascript:void(0)"><span class="glyphicon glyphicon-home" aria-hidden="true"></span><span>主页</span> <span class="sr-only">(current)</span></a></li>
					</ul>
	<!--				个人中心-->
					<ul id="toPersonal" class="nav navbar-nav person_all">
						<li>
							<a href="javascript:void(0)">
								<span class="glyphicon glyphicon-user" aria-hidden="true">
								</span>
								<span class="person_span">个人中心</span>
								<span class="sr-only">(current)</span>
							</a>
						</li>
					</ul>
	<!--			好物推荐-->
					<div class="navbar-header tuijian_all">
						<ul id="toTuijian" class="nav navbar-nav">
							<li><a class="navbar-brand" href="javascript:void(0)"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span><span>好物推荐</span></a></li>
						</ul>
					</div>
<!--                   搜索-->
                   	<form id="transient" class="navbar-form navbar-left col-lg-2">
    <!--				搜索框-->
                        <div class="form-group search_box"  id="search-form">
                        </div>
    <!--					搜索框-->
                    </form>
                    
	<!--				登录注册-->
	<!-- 					<ul class="nav navbar-nav navbar-right wsh ">
							<li class="dropdown">
								<a href=" " class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
									<span class="glyphicon glyphicon-tag" aria-hidden="true"></span>
									登录/注册
									<span class="caret"></span>
								</a>
								<ul class="dropdown-menu">
									<li>
										<a id="toLogin" href="#">登陆</a>
									</li>
									<li role="separator" class="divider">

									</li>
									<li>
										<a id="toRegist" href="#">注册</a>
									</li>
									<li>< a href="#">注销</ a></li>
								</ul>
							</li>
						</ul> -->
				</div>
			</div>
		</nav>
	</div>
<!--	主体部分-->
	<div id="main">
	<small>Comparing</small>
		<div class="col-md-12 tb" style="padding:2em 0;">
			<div class="table-responsive">
				<table class="table table-bordered table-striped" id="test_table">
					<thead>
						<tr>
							<th  class="first"> <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;参数 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;序号 --></th>
<!-- 							 <th class="center">1</th>
							<th class="center">2</th>
							<th class="center">3</th>
							<th class="center">4</th>
							<th class="center">5</th>  -->
						</tr>
					</thead>
					<tbody>
								
					</tbody>
				</table>
			</div>
		</div>
		<div class="col-md-3 excel">
			<button type="button" class="btn btn-success btn-block button button--winona button--border-thin button--round-s" id="generate-excel" data-text="change into Excel"><span>将表格转换为Excel</span></button>
		</div>
	</div>
<!--	底部-->
	<div id="footer"  class="row">
<!--	超链接-->
		<table>
			<tr>
				<th class="col-md-2">比价指南</th>
				<th class="col-md-2">合作伙伴</th>
				<th class="col-md-2">关于我们</th>
			</tr>
			<tr>
				<td><a href="">常见问题</a></td>
				<td><a href="">京东</a></td>
				<td><a href="">©2019比比淘版权所有</a></td>
			</tr>
			<tr>
				<td><a href="">联系客服</a></td>
				<td><a href="">天猫</a></td>
				<td><a href="">友情链接</a></td>
			</tr>
			<tr>
				<td><a href="">比价流程</a></td>
				<td><a href="">淘宝</a></td>
				<td><a href="">浙ICP备10201940号</a></td>
			</tr>
			<tr>
				<td></td>
				<td><a href="">唯品会</a></td>
				<td><a href="">浙公网安备33030802010083</a></td>
			</tr>
		</table>
<!--		置顶-->
		<div id="btn" class="zhiding alert alert-danger" role="alert">
			<a href="#"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span></a>
		</div>
	</div>
</div>
<!--下载按钮js-->
<script>

			(function() {

				var isSafari = !!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);

				if(isSafari) {

					document.getElementById('support-note').style.display = 'block';

				}

			})();

</script>
</body>
<!--表格-->
<!--<script src="https://www.jq22.com/jquery/jquery-1.10.2.js"></script>-->
<script>
		/* 	$(document).ready(function(){
				var xx = [{
					//商品图片
					Mtype:"图片",
					good1:"<img src='img/1.jpg'></img>",
					good2:"<img src='img/2.jpg'></img>",
					good3:"<img src='img/3.jpg'></img>",
					good4:"<img src='img/4.jpg'></img>",
					good5:"<img src='img/5.jpg'></img>",
				},{
					//产品名称
					Mtype:"产品名称",
					good1:" 惠普（HP）薄锐ENVY13.3英寸超级本【酷睿10代】超轻薄便携窄边框木纹金属设计师商务笔记本电脑 木纹黑：背光键盘、指纹、1080高清【11月新品】 i5-10210/8G/1T【MX250独显】",
					good2:" 惠普（HP）薄锐ENVY13.3英寸超级本【酷睿10代】超轻薄便携窄边框木纹金属设计师商务笔记本电脑 木纹黑：背光键盘、指纹、1080高清【11月新品】 i5-10210/8G/1T【MX250独显】",
					good3:" 惠普（HP）薄锐ENVY13.3英寸超级本【酷睿10代】超轻薄便携窄边框木纹金属设计师商务笔记本电脑 木纹黑：背光键盘、指纹、1080高清【11月新品】 i5-10210/8G/1T【MX250独显】",
					good4:" 惠普（HP）薄锐ENVY13.3英寸超级本【酷睿10代】超轻薄便携窄边框木纹金属设计师商务笔记本电脑 木纹黑：背光键盘、指纹、1080高清【11月新品】 i5-10210/8G/1T【MX250独显】",
					good5:" 惠普（HP）薄锐ENVY13.3英寸超级本【酷睿10代】超轻薄便携窄边框木纹金属设计师商务笔记本电脑 木纹黑：背光键盘、指纹、1080高清【11月新品】 i5-10210/8G/1T【MX250独显】",
				},{
					//品牌
					Mtype:"品牌",
					good1:"戴尔（Alienware）外星人 AW988",
					good2:"戴尔（Alienware）外星人 AW988",
					good3:"戴尔（Alienware）外星人 AW988",
					good4:"戴尔（Alienware）外星人 AW988",
					good5:"戴尔（Alienware）外星人 AW988",
				},{
					//屏幕尺寸
					Mtype:"屏幕尺寸",
					good1:"6.67",
					good2:"6.52",
					good3:"7.32",
					good4:"6.62",
					good5:"6.98",
				},{
					//电池容量
					Mtype:"电池容量",
					good1:"aa",
					good2:"bb",
					good3:"cc",
					good4:"dd",
					good5:"ee",
				},{
					//处理器
					Mtype:"处理器",
					good1:"as",
					good2:"sd",
					good3:"df",
					good4:"fg",
					good5:"gh",
				},{
					//机身内存
					Mtype:"机身内存",
					good1:"双核-3865U 8G+128GB双核-3865U 8G+256GB双核-3865U 8G+512GB酷睿i7-7500U版8G+256GB酷睿i7-7500U版8G+512GB酷睿i7-7500U版16GB+256GB酷睿i7-7500U版16GB+512GB定制款订金",
					good2:"双核-3865U 8G+128GB双核-3865U 8G+256GB双核-3865U 8G+512GB酷睿i7-7500U版8G+256GB酷睿i7-7500U版8G+512GB酷睿i7-7500U版16GB+256GB酷睿i7-7500U版16GB+512GB定制款订金",
					good3:"双核-3865U 8G+128GB双核-3865U 8G+256GB双核-3865U 8G+512GB酷睿i7-7500U版8G+256GB酷睿i7-7500U版8G+512GB酷睿i7-7500U版16GB+256GB酷睿i7-7500U版16GB+512GB定制款订金",
					good4:"双核-3865U 8G+128GB双核-3865U 8G+256GB双核-3865U 8G+512GB酷睿i7-7500U版8G+256GB酷睿i7-7500U版8G+512GB酷睿i7-7500U版16GB+256GB酷睿i7-7500U版16GB+512GB定制款订金",
					good5:"双核-3865U 8G+128GB双核-3865U 8G+256GB双核-3865U 8G+512GB酷睿i7-7500U版8G+256GB酷睿i7-7500U版8G+512GB酷睿i7-7500U版16GB+256GB酷睿i7-7500U版16GB+512GB定制款订金",
				},{
					//运行内存
					Mtype:"运行内存",
					good1:"8GB 1866MHz LPDDR3 主板集成内存",
					good2:"8GB 1866MHz LPDDR3 主板集成内存",
					good3:"8GB 1866MHz LPDDR3 主板集成内存",
					good4:"8GB 1866MHz LPDDR3 主板集成内存",
					good5:"8GB 1866MHz LPDDR3 主板集成内存",
				},{
					//型号
					Mtype:"型号",
					good1:"Microsoft/微软 Surface Studio 2 酷睿 i7 32GB 2TB",
					good2:"Microsoft/微软 Surface Studio 2 酷睿 i7 32GB 2TB",
					good3:"Microsoft/微软 Surface Studio 2 酷睿 i7 32GB 2TB",
					good4:"Microsoft/微软 Surface Studio 2 酷睿 i7 32GB 2TB",
					good5:"Microsoft/微软 Surface Studio 2 酷睿 i7 32GB 2TB",
				},{
					//显卡
					Mtype:"显卡",
					good1:"ty",
					good2:"yu",
					good3:"ui",
					good4:"io",
					good5:"op",
				},{
					//续航时间
					Mtype:"续航时间",
					good1:"fv",
					good2:"vh",
					good3:"hu",
					good4:"ul",
					good5:"mh",
				}]
				function Build(){};
				Build.prototype.render = function(){
					$("#test_table tbody").html("");
					for(i = 0; i < xx.length; i++) {
//						偶数行
						if(i%2==0){
							var html ="<tr class='odd'><td class='title'>" + xx[i].Mtype+ "</td><td class='conten'>" + xx[i].good1 +"</td><td class='conten'>" + xx[i].good2 + "</td><td class='conten'>" + xx[i].good3 + "</td><td class='conten'>" + xx[i].good4 + "</td><td class='conten'>" + xx[i].good5 + "</td></tr>";
						$("#test_table tbody").append(html);
						}
//						奇数行
						else{
							var html ="<tr class='seve'><td class='title'>" + xx[i].Mtype+ "</td><td class='conten'>" + xx[i].good1 +"</td><td class='conten'>" + xx[i].good2 + "</td><td class='conten'>" + xx[i].good3 + "</td><td class='conten'>" + xx[i].good4 + "</td><td class='conten'>" + xx[i].good5 + "</td></tr>";
						$("#test_table tbody").append(html);
						}
					}
				},
				Build.prototype.clear = function (){
					$(".modal-body input").val("");
					$("#myModal").hide()
				}
				Build.prototype.init = function(){
					this.render();
				}
				Build.prototype.show =function(){
					$("#myModal").show();
				}
				Build.prototype.hide =function(){
					$(".modal-body input").val("");
					$("#myModal").hide()
				}
				Build.prototype.getData = function(){
					var data = $(".modal-body").serializeArray();
					console.log(data);
					var str = {
						id:0,
						name:data[0].value,
						Province:data[1].value,
						city:data[2].value,
						sex:data[3].value,
						work:data[4].value,
						age:data[5].value
					}
					xx.push(str);
				}
				
				
				var run = new Build();
				run.init();
				
				$("#btn_add").click(function () {
					run.show();
				});
				$(".colseBtn").click(function(){
					run.hide();
				})
				$("#btn_submit").click(function(){
					run.getData();
					run.hide();
					run.init();
				})
				$("#generate-excel").click(function(){
					var excel=new ExcelGen({"src_id":"test_table","show_header":true});
					excel.generate();
				});
			}); */
		</script>
<script type="text/javascript" src="js/jszip.min.js"></script>
<script type="text/javascript" src="js/FileSaver.js"></script>
<script type="text/javascript" src="js/excel-gen.js"></script>
</html>
<script type="text/javascript">

function getUrl(){
	var deffered = new $.Deferred();
	$.getJSON("res/serverconfig.json",(responseText)=>{
		$url = responseText.protocol + responseText.domain+ ":" + responseText.port + responseText.context;
		//执行显示是否拿到数据
		//console.log($url);
		
		deffered.resolve($url);
	});
	var result = new $.Deferred();
 	deffered.then(function( serverconfig ) {
		$.getJSON("res/jumpconfig.json",(responseText)=>{
			$urls = responseText.protocol + responseText.domain;
			var getDict=[];
			getDict["serverconfig"]=serverconfig;
			getDict["jumpconfig"]=$urls;
			//执行显示是否拿到数据
		//	console.log(getDict);
			result.resolve(getDict);
		});		
		
	}) 
	return result;
}


	$(function(){
		
		var def = getUrl();
		def.then(function(getDict){
			//console.log($url);
			//关于登录注册 直接加上 就可以  删掉一个js
			//刷新页面 判定用户是否登录
			/* token无内容 说明还没有登录 判定用户是否登录 */
			if(localStorage.length == 0){
				$("#transient").after('<!--				登录注册--><ul class="nav navbar-nav navbar-right wsh "><li class="dropdown"><a href=" " class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span>登录/注册<span class="caret"></span></a><ul class="dropdown-menu"><li><a id="toLogin" href="#">登录</a></li><li role="separator" class="divider"></li><li><a id="toRegist" href="#">注册</a></li><!-- <li>< a href="#">注销</ a></li> --></ul></li></ul>')
			}else{
				var tokens=localStorage.getItem("token");
				let $data={token:tokens};
				let data = JSON.stringify($data)
				
				$.ajax({
					type:"post",
					data:data,
					url:getDict.serverconfig+"/judgeLoginStatus.action",
					headers:{"Content-Type":"application/json;charset=UTF-8"},
					dataType:"json",
					success:function(responseText){
						if(responseText.status === "200"){   //"<p>欢迎您,"+responseText.userName+"		<a id='out' href='#'>注销</a></p>"
							$("#transient").after('<!--				登录注册--><ul class="nav navbar-nav navbar-right wsh "><li class="dropdown"><a href=" " class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span>欢迎您:'+responseText.userName+'<span class="caret"></span></a><ul class="dropdown-menu"><li><a id="out" href="#">注销</a></li><!-- <li>< a href="#">注销</ a></li> --></ul></li></ul>')
						}else{
							//登录过期
							$("#transient").after('<!--				登录注册--><ul class="nav navbar-nav navbar-right wsh "><li class="dropdown"><a href=" " class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span>登录过期啦!请重新登录<span class="caret"></span></a><ul class="dropdown-menu"><li><a id="toLogin" href="#">登录</a></li><li role="separator" class="divider"></li><li><a id="toRegist" href="#">注册</a></li><!-- <li>< a href="#">注销</ a></li> --></ul></li></ul>')
						}	
					},
					error:function(){
						location.href=getDict.jumpconfig+"/404.html"
					}	
				});
			}
			
			//注销
				$("body").on("click","#out",function(){
					localStorage.removeItem("token");
					location.reload();
				});
			
			
		
			//弹出登录
			$("body").on("click","#toLogin,#create-btn2",function(){
				
				$("body").append('<div class="sign-in" id="js1"><div id="main-content" class="card"> <header><span class="close" id="close1"></span><span id="bbt-signin-header">账户</span></header> <section><div class="condition2">*为必填项目</div><form action=""><div class="input-row"><h1 class="accounttext">账号*</h1><input id="account" class="account" type="text" placeholder=""/></div><div class="password-row"><div class="display"><a href="javascript:void(0)">显示</a></div><h1 class="passwordtext">密码*</h1><input id="password" class="password" type="password" placeholder=""/><div class="forgetnumber"><a href="javascript:void(0)">忘记密码？</a></div></div><div class="button-row"><button id="submit-btn" type="submit">登录</button> </div><div class="tos-pp">继续操作则表示您同意我们的<a id="bbt-tos" href="javascript:void(0)">服务条款</a>和<a id="bbt-pp" href="javascript:void(0)">隐私声明</a></div></form><hr/><div class="button-row"><button id="create-btn" type="submit">创建账户</button></div></section><div class="prompt"><p>通过您的账户，将可以：</p><p>● 查看预期价格</p><p>● 查看您的所有收藏记录和浏览记录</p><p>● 管理您的地址簿，以方便日后订购</p><p>● 更新您的个人资料</p></div></div></div>')
			
			
			//显示密码
			$(".display").click(function(){
				let pass_type = $('.password').attr('type');
				if (pass_type === 'password' ){
			          $('.password').attr('type','text');
			          $('.display').html('<a href="javascript:void(0)">隐藏</a>')
			       } else {
			           $('.password').attr('type', 'password');
			           $('.display').html('<a href="javascript:void(0)">显示</a>')
			       }
			})
			//判定账号密码是否为空
			//if($("#account").val() !="" && $("#password").val() != ""){
				$("#submit-btn").click(()=>{
					//先令判定框为空
					$("#judge_loginbtn").html("");
					$("#judge_loginbtn").remove();
					let $data = {
							account: $.trim($("#account").val()),  //trim 去除两端空白符号
							password: $.trim($("#password").val())
							};
					//window.console.log($data);
					//把对象变成字符串 以对应ContentType的json字符串传过去
					let person = JSON.stringify($data);
					$.ajax({
						type:"post",
						url:getDict.serverconfig +"/login.action",
						data:person,
						headers:{"Content-Type":"application/json;charset=UTF-8"},
						dataType:"json",
						async:false,
						//contentType:  这里显示的是表单type传值  一般用json 字符串传值 这样就需要修改contentType
						success: function(responseText){
							//window.console.log(responseText)
							//当账号和密码一致时
							if(responseText.status ==="200"){
								if(!window.localStorage){
									alert("浏览器不支持localStorage");
								}else{
									//var storage=window.localStorage; 
									//console.log(responseText.token);
									//localStorage.clear();
									/* 存入token  */
									localStorage.setItem("token", responseText.token);
									/* storage["token"]=responseText.token; */
									//$(".forgetnumber").prepend("<span id='judge_loginbtn' style='color:green'>恭喜，登陆成功</span>")
									//console.log(localStorage);
									var returnUrl = localStorage.returnUrl;
									//console.log(returnUrl)
									localStorage.removeItem("returnUrl");
									//if(returnUrl === undefined){
									//返回当前页面
									location.reload();
									//}else{
									//	location.href='http://bbt.com/goodsDetail.html'+returnUrl;  
									//}
									
									//location.href='http://bbt.com/goodsDetail.html'+returnUrl;  
								
			/* 			            storage.clear();
						            console.log(storage); */
								}
							}else{
								$(".forgetnumber").prepend('<span id="judge_loginbtn" style="margin-right:160px;color:red;" >账号或密码错误</span>')
							}	
						},
						error:function(){
							location.href=getDict.jumpconfig+"/404.html"
						}
					});
					
				});
		})
			// 关闭登录页面
			$("body").on("click","#close1",function(){
					$(this).parents("#js1").remove();
			})
			//关闭注册页面
			$("body").on("click","#close2",function(){
					$(this).parents("#js2").remove();
			})
			
			
			//弹出注册
			$("body").on("click","#toRegist,#create-btn",function(){
				$("#js1").remove()
				$("body").append('<div class="sign-in" id="js2"><div id="main-content2" class="card"><header><span class="close" id="close2"></span><span id="bbt-signin-header2">账户</span></header><section><div class="condition">*必填项目</div><div class="build">创建账户</div><form action=""><div class="name-row"><h1  class="nametext">用户名* </h1><input id="name" class="name" type="text" placeholder=""/></div><div class="input-row"><h1 class="accounttext">账号* </h1><input id="account" class="account" type="text" placeholder=""/></div><div class="password-row"><div class="display"><a href="javascript:void(0)">显示</a></div><h1 id="judgePassword1" class="passwordtext">密码* </h1><input id="password1" class="password" type="password" placeholder=""/></div><div class="password-row"><h1 id="judgePassword2" class="passwordtext">确定密码* </h1><input id="password2" class="password" type="password" placeholder=""/></div><div class="mail-row"><h1 class="mailtext">E-mail* </h1><input id="Email" class="mail" type="text" placeholder=""></div><div class="phone-row"><h1 class="phonetext">手机号码* </h1><input id="tel" class="phone" type="text" placeholder=""></div><div class="ag-po">创建账户，您即同意接受我们的条款《<a id="bbt-ag" href="">比比淘用户注册协议</a>》，并同意您的个人信息遵照《<a id="bbt-po" href="">比比淘隐私政策</a>》</div></form><div class="button-row"><button id="create-btn2" type="submit">创建账户</button></div><hr/></section></div></div>')
				
				//正式注册样式
				var $name = false;
				var $account = false;
				var $passowrd1 = false;
				var $password2 = false;
				var $Email = false;
				var $tel = false;
				
	/* 			let $url = "";
				//获取url的路径
				//获取json文件中的数据				回调函数 当执行完后获取数据后
				$.getJSON("res/serverconfig.json",(responseText)=>{
					$url = responseText.protocol + responseText.domain+ ":" + responseText.port + responseText.context;
					//执行显示是否拿到数据
					window.console.log($url);
				}); */
				//function $judge(){
				//	console.log(123)
				//}
				
				// 判定用户账号是否存在
				$("#account").blur(function(){
					//当用户失去焦点时，先去除之前的内容
					$(".tishi2").remove();
					/* $() */
					 let $datas={
							 account :$.trim($("#account").val())
					 }
					 let data = JSON.stringify($datas);
					 if($.trim($("#account").val()).length >=6 && $.trim($("#account").val()).length<=20 ){
						 $.ajax({
								type:"post",
								data:data,
								url: getDict.serverconfig+"/judgeAccount.action",
								dataType:"json",
							 	headers:{"Content-Type":"application/json;charset=UTF-8"},
								success:function(responseText){
									if(responseText.status === 200){
										/* console.log("此用户名可用"); */
										$account = true;
									}else{
										$(".accounttext").append('<span style="color:red" class="tishi2">（此账号已被注册）</span>');
									}
								},
								error:function(){
									location.href=getDict.jumpconfig+"/404.html"
								}
							 });
					 }else{
						 $(".accounttext").append('<span style="color:red" class="tishi2">（输入的长度要在6-20之间）</span>');
					 }
					});
				
				//判定密码长度
				$("#password1").blur(function(){
					$(".tishi3").remove();
					if($.trim($("#password1").val()).length <6 || $.trim($("#password1").val()).length >20){
						$("#judgePassword1").append('<span style="color:red" class="tishi3">（密码长度需在6-20之间）</span>');
					}else{
						$password1 = true;
					}
				})
				
				// 判定确认密码是否与密码相同
				$("#password2").blur(function(){
					$(".tishi4").remove()
					if($("#password1").val() ==""){
						$("#judgePassword2").append('<span style="color:red" class="tishi4">（密码不能为空）</span>');
					}
					else if($("#password1").val() === $("#password2").val()){
						$password2 = true;
					}else{
						$("#judgePassword2").append('<span style="color:red" class="tishi4">（两次密码输入不一致）</span>');
					}
				})
				
				//判定邮箱格式
				$("#Email").blur(function(){
					$(".tishi5").remove()
					   var reg = new RegExp("^[a-z0-9A-Z]+[- | a-z0-9A-Z . _]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\\.)+[a-z]{2,}$"); 
					   var email = $('#Email').val();
					   if(email == ''){
						  $(".mailtext").append('<span style="color:red" class="tishi5">（邮箱不能为空）</span>');
					}else if(!reg.test(email)){
						$(".mailtext").append('<span style="color:red"  class="tishi5">（邮箱的格式不正确）</span>');
					}else{
						$Email = true;
					}
					
				})
				//判断手机号码的格式
				$("#tel").blur(function(){
					$(".tishi6").remove();
					var reg = /(1[3-9]\d{9}$)/; 
					var tel = $.trim($("#tel").val());
					if(!reg.test(tel)){
						$(".phonetext").append('<span style="color:red" class="tishi6">（手机的格式不正确）</span>');
					}else{
						$tel = true;
					}
				})
				
			//显示密码
			$(".display").click(function(){
				let pass_type = $('.password').attr('type');
				if (pass_type === 'password' ){
			          $('.password').attr('type', 'text');
			          $('.display').html('<a href="javascript:void(0)">隐藏</a>')
			       } else {
			           $('.password').attr('type', 'password');
			           $('.display').html('<a href="javascript:void(0)">显示</a>')
			       }
			})
				
				//判断名字的长度
				$("#name").blur(function(){
					$(".tishi1").remove();
					if($.trim($("#name").val()).length >1 && $.trim($("#name").val()).length <7){
						$name = true;
					}else{
						$(".nametext").append('<span style="color:red" class="tishi1">（用户名长度需在1-7之间）</span>');
					}
				})
				
				//注册按钮判定
				$("#create-btn2").click(function(){
					$(".tishi8").remove();
					if($name == true && $account == true && $password1 == true && $password2 == true && $Email == true && $tel == true){
						let $datas={
								name: $.trim($("#name").val()),
								account: $.trim($("#account").val()),
								password: $.trim($("#password1").val()),
								Email: $('#Email').val(),
								tel: $.trim($("#tel").val())
							}
						//console.log($datas)
						let data = JSON.stringify($datas);
						$.ajax({
							type:"post",
							data:data,
							url:getDict.serverconfig+ "/regist.action",
							headers:{"Content-Type":"application/json;charset=UTF-8"},
							dataType: "json",
							success:function(responseText){
								if(responseText.rows ===1){
									$("#js2").remove();
									//$(".button-row").after("<span id='judge_registBtn' style='color: green'>注册成功</span>");
									//location.href='http://bbt.com/Login.html';
								}else{
									$(".button-row").after('<span style="color:red" class="tishi8">（注册失败啦 请重新注册）</span>');
								}
								
							},
							error:function(){
								location.href=getDict.jumpconfig+"/404.html"
							}
							
						})
					}else{
						$(".button-row").after('<span style="color:red" class="tishi8">（请先将信息填写完整）</span>');
					}
				})
			})
			
			$(".autocomplete-input").keyup(function(){
				$(".proposal-list").show();
				if($.trim($(".autocomplete-input").val()) != ""){
					let $data = {
							keyword: $.trim($(".autocomplete-input").val())
						};
						//window.console.log($data)
						let digit = JSON.stringify($data)
						$.ajax({
							type:"post",
							url:getDict.serverconfig+"/searchSimilar.action",
							data:digit,
							headers:{"Content-Type":"application/json;charset=UTF-8"},
							dataType:"json",
							success:function(responseText){
								/* 列表属性 */
								//window.console.log(responseText)
								$(".proposal-list").text("")
				 				for(var one in responseText){ //<li class="proposal">a1</li>  <tr><td class= 'content'>"+responseText[one]+"</td></tr>
									$(".proposal-list").append('<li class="proposal">'+responseText[one]+'</li>')
								} 
								
							},
							error:function(){
								location.href=getDict.jumpconfig+"/404.html"
							}
						})
				}else{
					$(".proposal-list").text("");
				}
			});
			
			// 近似值优化
			$(".autocomplete-input").click(function(){
				$(".proposal-list").show();
			});
			$(document).click(function(e){
				var target = $(e.target);
				if(target.attr("class")==="autocomplete-input") {return;}
				else if(target.attr("class")==="proposal"){
					//console.log(target.text());
					$(".autocomplete-input").val(target.text());
					$(".proposal-list").text("");
					$(".proposal-list").hide();
					}
				else{
					$(".proposal-list").hide();
					//console.log(target)
				}
			});
			//鼠标移入后变色
	/* 		$(".proposal").mouseover(function(){
				$(this).css("background-color","red")
			}) */
		
		//回车键触发点击事件
		$("input[name='query']").keydown(function(event){
			if(event.keyCode==13){
			$(".autocomplete-button").click();
			}
			})
		//取消原form表单的submit功能
		$("#transient").submit( function () {
  			return false;
		} );
			
			
				//点击搜索触发事物 将关键词存入词库
		$(".autocomplete-button").click(function(){
			if($.trim($(".autocomplete-input").val()) !== ""){
				let $datas={
						content: $.trim($(".autocomplete-input").val())	
					}
					//window.console.log($datas)
					data = JSON.stringify($datas);
					$.ajax({
						type:"post",
						url:getDict.serverconfig+"/search.action",
						data:data,
						headers:{"Content-Type":"application/json;charset=UTF-8"},
						dataType:"json",
						success:function(){
							//console.log("成功插入，即将跳转");
							location.href=getDict.jumpconfig+"/goods.html?content="+$.trim($(".autocomplete-input").val())+"&pageCurrent=1";
						},
						error:function(){
							location.href=getDict.jumpconfig+"/404.html"
						}
					})
			}else{
				location.href=getDict.jumpconfig+'/index.html'; 
			}		
		})
		
		//主体部分  先判定cookie
		//页面刷新时显示比较框的商品  显示一共有多少个商品
	    //console.log((JSON.stringify($.cookie())).split('","'))
	    var arrContent = (JSON.stringify($.cookie())).split('","')
	    var length = arrContent.length
	    if(arrContent[0] =="{}"){
	  	  length =0;
	    }
	    //console.log(length)
	    
	    for(var z = length;z>=1;z--){
	    	/* <th class="center">1</th> */
			$(".first").after('<th class="center">'+z+'</th>')
	    }
	    
	    //console.log(length)
	    //console.log($.cookie())
	    var idList=[];
	    if(length !==0){
		      for(var i=1;i<=length;i++){
		    	  var temp = JSON.parse($.cookie(i+""))
		    	  //console.log(temp.goodsId)
		    	  idList.push(temp.goodsId)
		      }
		      let $datas={
		    		  content:idList
		      }
		      data = JSON.stringify($datas);
		      $.ajax({
		    	  type:"post",
		    	  url:getDict.serverconfig+"/getCompare.action",
		    	  data:data,
				  headers:{"Content-Type":"application/json;charset=UTF-8"},
		    	  dataType:"json",
		    	  success:function(responseText){
		    		  //console.log(responseText);
		    		  
						function Build(){};
						Build.prototype.render = function(){
	
						
							$("#test_table tbody").html("");
							var html ="<tr class='seve'><td  class='title'>" + responseText.goodsContent[0].Mtype
							var num1 = -1
							for(var key in responseText.goodsContent[0]){
								if(key != "Mtype"){
								num1 = num1+1
								var goodsImg1 = responseText.goodsContent[0][key]+""
								var goodsImg = "<a href='javascript:void(0)' id="+responseText.goodsList[num1].goodsId+" value="+responseText.goodsList[num1].goodsPrice+" ><img id="+responseText.goodsList[num1].shop+"  src="+goodsImg1.replace("E:\\","")+"></img></a>"
									html = html+ "</td><td class='conten' >" + goodsImg
								}
							} 
							html = html+ "</td></tr>"
							$("#test_table tbody").append(html);
							
							for(i = 1; i < responseText.goodsContent.length; i++) {
//								偶数行
								if(i%2==0){
									var html ="<tr class='odd'><td  class='title'>" + responseText.goodsContent[i].Mtype
									for(var key in responseText.goodsContent[i]){
										if(key != "Mtype"){
											html = html+ "</td><td class='conten' >" + responseText.goodsContent[i][key]
										}
									} 
									html = html+ "</td></tr>"
									$("#test_table tbody").append(html);
								}
//								奇数行
								else{
									var html ="<tr class='seve'><td  class='title'>" + responseText.goodsContent[i].Mtype
									for(var key in responseText.goodsContent[i]){
										if(key != "Mtype"){
											html = html+ "</td><td class='conten'>" + responseText.goodsContent[i][key]
										}
									} 
									html = html+ "</td></tr>"
									$("#test_table tbody").append(html);
								}
							}
					/* 		Build.prototype.render = function(){
								$("#test_table tbody").html("");
								for(i = 0; i < xx.length; i++) {
//									偶数行
									if(i%2==0){
										var html ="<tr class='odd'><td class='title'>" + xx[i].Mtype+ "</td><td class='conten'>" + xx[i].good1 +"</td><td class='conten'>" + xx[i].good2 + "</td><td class='conten'>" + xx[i].good3 + "</td><td class='conten'>" + xx[i].good4 + "</td><td class='conten'>" + xx[i].good5 + "</td></tr>";
									$("#test_table tbody").append(html);
									}
//									奇数行
									else{
										var html ="<tr class='seve'><td class='title'>" + xx[i].Mtype+ "</td><td class='conten'>" + xx[i].good1 +"</td><td class='conten'>" + xx[i].good2 + "</td><td class='conten'>" + xx[i].good3 + "</td><td class='conten'>" + xx[i].good4 + "</td><td class='conten'>" + xx[i].good5 + "</td></tr>";
									$("#test_table tbody").append(html);
									}
								}
							}, */
							
						},
						Build.prototype.clear = function (){
							$(".modal-body input").val("");
							$("#myModal").hide()
						}
						Build.prototype.init = function(){
							this.render();
						}
						Build.prototype.show =function(){
							$("#myModal").show();
						}
						Build.prototype.hide =function(){
							$(".modal-body input").val("");
							$("#myModal").hide()
						}
						Build.prototype.getData = function(){
							var data = $(".modal-body").serializeArray();
							//console.log(data);
							var str = {
								id:0,
								name:data[0].value,
								Province:data[1].value,
							 	city:data[2].value,
								sex:data[3].value,
								work:data[4].value,
								 age:data[5].value  
							}
							xx.push(str);
						}
						
						
						var run = new Build();
						run.init();
						
						$("#btn_add").click(function () {
							run.show();
						});
						$(".colseBtn").click(function(){
							run.hide();
						})
						$("#btn_submit").click(function(){
							run.getData();
							run.hide();
							run.init();
						})
						$("#generate-excel").click(function(){
							var excel=new ExcelGen({"src_id":"test_table","show_header":true});
							excel.generate();
						});
		    		  
		    		  
		    	  },error:function(){
		    		  location.href=getDict.jumpconfig+"/404.html"
		    	  }
		      
		      })
		      
	    }
	    
		
		
		
		
		//标题栏跳往个人中心
		$("#toIndex").click(function(){
			location.href=getDict.jumpconfig+"/index.html";
		})
		
		
				//标题栏跳往个人中心
		$("#toPersonal").click(function(){
			location.href=getDict.jumpconfig+"/personal.html";
		})
		//标题栏跳往商品推荐
		$("#toTuijian").click(function(){
			location.href=getDict.jumpconfig+"/tuijian.html";
		})
		//点击回到顶部
		 $("#btn").hide();
	    //当滚动条的位置处于距顶部50像素以下时，跳转链接出现，否则消失
	      $(window).scroll(function() {
	        if ($(window).scrollTop() > 50) {
	          $("#btn").fadeIn(200);
	        } else {
	          $("#btn").fadeOut(200);
	        }
	      });
	      //当点击跳转链接后，回到页面顶部位置
	      $("#btn").click(function() {
	        $('body,html').animate({
	          scrollTop: 0
	        },
	        500);
	        return false;
	      });
		
		}) 
		})


</script>





